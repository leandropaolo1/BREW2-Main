{% extends "brewwerblog/base.html" %}
{% block content %}
{% load static %}
<div class="row">
	<div class="col ">
		<div  class="container ">
			<div class="content-section yourpots">
			  <div class="row justify-content-center "> 
				  <div class="col">
					  <div class="row">
						<div class="col">
							<div class="row justify-content-end">
								<svg xmlns="http://www.w3.org/2000/svg" width="45" height="45" fill="Aquamarine" class="bi bi-cup-straw" viewBox="0 0 16 16">
									<path d="M13.902.334a.5.5 0 0 1-.28.65l-2.254.902-.4 1.927c.376.095.715.215.972.367.228.135.56.396.56.82 0 .046-.004.09-.011.132l-.962 9.068a1.28 1.28 0 0 1-.524.93c-.488.34-1.494.87-3.01.87-1.516 0-2.522-.53-3.01-.87a1.28 1.28 0 0 1-.524-.93L3.51 5.132A.78.78 0 0 1 3.5 5c0-.424.332-.685.56-.82.262-.154.607-.276.99-.372C5.824 3.614 6.867 3.5 8 3.5c.712 0 1.389.045 1.985.127l.464-2.215a.5.5 0 0 1 .303-.356l2.5-1a.5.5 0 0 1 .65.278zM9.768 4.607A13.991 13.991 0 0 0 8 4.5c-1.076 0-2.033.11-2.707.278A3.284 3.284 0 0 0 4.645 5c.146.073.362.15.648.222C5.967 5.39 6.924 5.5 8 5.5c.571 0 1.109-.03 1.588-.085l.18-.808zm.292 1.756C9.445 6.45 8.742 6.5 8 6.5c-1.133 0-2.176-.114-2.95-.308a5.514 5.514 0 0 1-.435-.127l.838 8.03c.013.121.06.186.102.215.357.249 1.168.69 2.438.69 1.27 0 2.081-.441 2.438-.69.042-.029.09-.094.102-.215l.852-8.03a5.517 5.517 0 0 1-.435.127 8.88 8.88 0 0 1-.89.17zM4.467 4.884s.003.002.005.006l-.005-.006zm7.066 0-.005.006c.002-.004.005-.006.005-.006zM11.354 5a3.174 3.174 0 0 0-.604-.21l-.099.445.055-.013c.286-.072.502-.149.648-.222z"/>
								  </svg>
							</div>				
						</div>
						<div class="col">
							<div class="row">
								<small >Your</small>
				
							</div>
							<div class="row">
								<small >Pots</small>
				
							</div>
						</div>
					  </div>
					</div>	  
				</div>
			</div>
		  
		  </div>
	</div>

</div>
<div class="container">
    <div  class="container content-section3">
      <div class="row justify-content-center"> 
          <div class="col">
            <h4 class="m-0 text-center">Get Creating</h4>
            <h4 class=" m-0 text-center">Start a New Pot</h4>
          </div>
        <div class= "col align-self-center">
          <div class="row justify-content-center">
            <button id="buttonJoin" type="button" class="btn btn-danger btn-lg btn-block">
              <a href="{% url 'create_pot' %}">
				<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="white" class="bi bi-cup-straw" viewBox="0 0 16 16">
					<path d="M13.902.334a.5.5 0 0 1-.28.65l-2.254.902-.4 1.927c.376.095.715.215.972.367.228.135.56.396.56.82 0 .046-.004.09-.011.132l-.962 9.068a1.28 1.28 0 0 1-.524.93c-.488.34-1.494.87-3.01.87-1.516 0-2.522-.53-3.01-.87a1.28 1.28 0 0 1-.524-.93L3.51 5.132A.78.78 0 0 1 3.5 5c0-.424.332-.685.56-.82.262-.154.607-.276.99-.372C5.824 3.614 6.867 3.5 8 3.5c.712 0 1.389.045 1.985.127l.464-2.215a.5.5 0 0 1 .303-.356l2.5-1a.5.5 0 0 1 .65.278zM9.768 4.607A13.991 13.991 0 0 0 8 4.5c-1.076 0-2.033.11-2.707.278A3.284 3.284 0 0 0 4.645 5c.146.073.362.15.648.222C5.967 5.39 6.924 5.5 8 5.5c.571 0 1.109-.03 1.588-.085l.18-.808zm.292 1.756C9.445 6.45 8.742 6.5 8 6.5c-1.133 0-2.176-.114-2.95-.308a5.514 5.514 0 0 1-.435-.127l.838 8.03c.013.121.06.186.102.215.357.249 1.168.69 2.438.69 1.27 0 2.081-.441 2.438-.69.042-.029.09-.094.102-.215l.852-8.03a5.517 5.517 0 0 1-.435.127 8.88 8.88 0 0 1-.89.17zM4.467 4.884s.003.002.005.006l-.005-.006zm7.066 0-.005.006c.002-.004.005-.006.005-.006zM11.354 5a3.174 3.174 0 0 0-.604-.21l-.099.445.055-.013c.286-.072.502-.149.648-.222z"/>
				  </svg>
				  <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="white" class="bi bi-people" viewBox="0 0 16 16">
					<path d="M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8zm-7.978-1A.261.261 0 0 1 7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002a.274.274 0 0 1-.014.002H7.022zM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0zM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816zM4.92 10A5.493 5.493 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275zM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/>
				  </svg>
              </a>
          </button>
          </div>  
      </div>
      </div>
    </div>
  </div>
  
	{% if page_obj %}

	<div class="col  infinite-container px-3 ">
		<div class="mt-3 comment-wrapper ">
			{% for friend in page_obj %}
				<div class="content-section hidden-mobile infinite-item ">
					<div class="row justify-content-center">
						<div class="col-4">
							<a href="{% url 'show_pot_page' pot_id=friend.id %}">
								<div class="card-image m-2">
									<img class="rounded-circle account-img" src="{{friend.image.url}}" alt="">
								</div>
							</a>
						</div>
						<div class="col">
							<a class="ml-3" href="{% url 'show_pot_page' pot_id=friend.id %}">
								<h1 class="account-heading">{{friend.pot_name}}</h1>
								
							</a>
							<h1 class="pl-2 mb-3">
								{{friend.profile_description}}

							</h1>
							<div class="row m-0 mt-3 pt-3 LineTop">
								<div class="d-inline-flex p-2 bd-highlight ">
									<h3 class="mr-5">
										<svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="lightblue" class="m-0 bi bi-person" viewBox="0 0 16 16">
										<path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
										</svg>{{ friend.member_count }}</h3>
									<h3 class="mr-5">
										<svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="orange" class="bi bi-layers" viewBox="0 0 16 16">
											<path d="M8.235 1.559a.5.5 0 0 0-.47 0l-7.5 4a.5.5 0 0 0 0 .882L3.188 8 .264 9.559a.5.5 0 0 0 0 .882l7.5 4a.5.5 0 0 0 .47 0l7.5-4a.5.5 0 0 0 0-.882L12.813 8l2.922-1.559a.5.5 0 0 0 0-.882l-7.5-4zm3.515 7.008L14.438 10 8 13.433 1.562 10 4.25 8.567l3.515 1.874a.5.5 0 0 0 .47 0l3.515-1.874zM8 9.433 1.562 6 8 2.567 14.438 6 8 9.433z"/>
										</svg>
										{{ friend.postcount }}
									</h3>
									<h3>
										<svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="yellow" class="bi bi-eye" viewBox="0 0 16 16">
											<path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
											<path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
										</svg>
										{{ friend.count_views }}
									</h3>
									<a href="{% url 'pot-category' friend.category %}"><button class="ml-4 btn btn-Category btn-sm cmt_btn mx-1 my-1">{{friend.category}}</button></a>

								</div>  
								</div>
						</div>
					</div>
				</div>
				<div class="content-section mobile-only infinite-item">
					
					<div class="row justify-content-center">
						<div class="col ">
							<div class="row ">
								<div class="col">
									<div class="row justify-content-center">
										<a href="{% url 'show_pot_page' pot_id=friend.id %}">
											<div class="card-image m-2">
												<img class="rounded-circle account-img" src="{{friend.image.url}}" alt="">
											</div>
										</a>
									</div>
	
								</div>
								<div class="col pl-3">
									<div class="row justify-content-center mt-4 pl-3">
										<a  href="{% url 'show_pot_page' pot_id=friend.id %}">
											<h1 class="account-heading">{{friend.pot_name}}</h1>
											
										</a>
	
									</div>
									<div class="row justify-content-center pl-3">
	
										<h1 class="pl-2 mb-3 mr-3">
											{{friend.profile_description}}
			
										</h1>
										<a href="{% url 'pot-category' friend.category %}"><button class=" btn btn-Category btn-sm cmt_btn mx-1 my-1">{{friend.category}}</button></a>

									</div>
									<div class="row justify-content-start pl-3">
	
	
			
										</h1>
									</div>
	
								</div>
								
	
							</div>
	
						</div>
						<div class="col">
	
							<div class="row justify-content-around m-0 mt-3 pt-3 LineTop">
								<div class="d-inline-flex p-2 bd-highlight ">
									<h3 class="mr-5">
										<svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="lightblue" class="m-0 bi bi-person" viewBox="0 0 16 16">
										<path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
										</svg>{{ friend.member_count }}</h3>
									<h3 class="mr-5">
										<svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="orange" class="bi bi-layers" viewBox="0 0 16 16">
											<path d="M8.235 1.559a.5.5 0 0 0-.47 0l-7.5 4a.5.5 0 0 0 0 .882L3.188 8 .264 9.559a.5.5 0 0 0 0 .882l7.5 4a.5.5 0 0 0 .47 0l7.5-4a.5.5 0 0 0 0-.882L12.813 8l2.922-1.559a.5.5 0 0 0 0-.882l-7.5-4zm3.515 7.008L14.438 10 8 13.433 1.562 10 4.25 8.567l3.515 1.874a.5.5 0 0 0 .47 0l3.515-1.874zM8 9.433 1.562 6 8 2.567 14.438 6 8 9.433z"/>
										</svg>
										{{ friend.postcount }}
									</h3>
									<h3>
										<svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="yellow" class="bi bi-eye" viewBox="0 0 16 16">
											<path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
											<path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
										</svg>
										{{ friend.count_views }}
									</h3>
	
								</div>  
								</div>
						</div>
					</div>
				</div>
		{% endfor %}
		</div>

	</div>

	

	{% else %} <!-- If no friends -->
	<div class="container">
		<div class="content-section">
			<div class="row justify-content-center">
				<h1 class="account-heading">
					You have no pots
				</h1>
			</div>
		</div>
	</div>
{% endif %}
<div class="col">
	<div class="content-section"></div>
</div>

{%if page_obj.has_next %}
<a class= "infinite-more-link" href="?page={{ page_obj.next_page_number }}"></a>
<!--<a class= "btn btn-outline-info mb-4" href="?page={{ page_obj.paginator.num_pages }}">Last</a>-->
{%endif%}

<script src="{% static 'brewwerblog/jquery.waypoints.min.js' %}"></script>
<script src="{% static 'brewwerblog/infinite.min.js' %}"></script>


<script src="{% static 'brewwerblog/jquery-3.6.0.min.js' %}"></script>
<script>
$(document).ready(function(){
	  var infinite = new Waypoint.Infinite({
	  element: $('.infinite-container')[0],

	  offset: 'bottom-in-view',
	  onBeforePageLoad: function(){

	  },
	  onAfterPageLoad:function(){

	  }

  })
});
</script>

{% endblock content %}

{% block side %}
{% load static %}
{%if user.is_authenticated%}
	<div class="row ">
		<div class="col d-flex justify-content-start py-2 my-2 ">
			<div class="content-section3">
				<div class="justify-content-center pt-1 pb-2">
					<h4 class="text-center">Create Pot</h4>
					<div class="row pt-3">
						<div class="col">
							<div class="flex-row d-flex justify-content-start m-0">
								<textarea class="form-control title-text- placeholder=" placeholder="Pot name..." ></textarea>

							</div>
							<div class="flex-row d-flex justify-content-start mt-3">
								<textarea class="form-control description-text- placeholder=" placeholder="Pot description..." ></textarea>

							</div>

							<div class="flex-row d-flex justify-content-end m-0">
								<div class="col p-0 m-0">
									<div class="dropdown mr-2 mt-2">
										<button class="btn btn-Category dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
										  Friends
										</button>
										<div class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
											{%for friend in friends%}
												<input type="checkbox" value="{{friend}}" class="friendschecked">{{friend}}<br/>
											{%endfor%}
				
										</div>
	
									</div>
								</div>
								<div class="col p-0 m-0">
									<button type="button" data-answer="{{user}}" class="btn btn-Submit btn-sm mt-2 p-2 save-pot">Create</button>

								</div>

							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="row ">
		<div class="col d-flex justify-content-start py-2 my-2 ">
			<div class="content-section3">
				<div class="justify-content-center pt-1 pb-2">
					
				</div>
			</div>
		</div>
	</div>


{%endif%}
<script src="{% static 'brewwerblog/jquery-3.6.0.min.js' %}"></script>


	
<script >
	$(document).ready(function(){
	  $(".save-pot").on('click',function(){
		var _answerid=$(this).data('answer');
		var _friendid=$(this).data('friendid');
		var _pottilte=$(".title-text-").val();
		var _description=$(".description-text-").val();
		var _friends_choosen=""

		$(".friendschecked:checked").each(function(){
			_friends_choosen+=$(this).val()+"::";
		})
		var _friends_choosenArr=_friends_choosen.split('::');
		$.ajax({
			url:"{% url 'save-new-pot' %}",
			type:"POST",
			data:{
			answerid:_answerid,
			friendschoosen:_friends_choosen,
			title:_pottilte,
			profile_description:_description,
			csrfmiddlewaretoken:"{{csrf_token}}"
			},
			dataType:'json',
			beforeSend:function(){
			$(".save-pot").addClass('disabled').text('...saving');
			},
			success:function(res){
			if(res.bool==true && !(_pottilte==="") ){

				$(".description-text-"+_answerid).val('');
				$(".title-text-"+_answerid).val('');
				var _html='<div class="container">\
						<div class="content-section">\
							<div class="row justify-content-center">\
								<div class="col-4">\
									<a href="#">\
										<div class="card-image m-2">\
											<img class="rounded-circle account-img" src="{%static "brewwerblog/tent.jpg" %}" alt="">\
										</div>\
									</a>\
								</div>\
								<div class="col">\
									<a class="ml-3" href="#">\
										<h1 class="account-heading">'+_pottilte+'</h1>\
									</a>\
									<h1 class="pl-2 mb-3">'+_description+'</h1>\
									<div class="row m-0 mt-3 pt-3 LineTop">\
										<div class="d-inline-flex p-2 bd-highlight ">\
										<h3 class="text-muted">Brewwers:'+(_friends_choosenArr.length);+' </h3>\
						  				</div>\
										</div>\
								</div>\
							</div>\
						</div>\
					</div>';
                  $(".comment-wrapper").prepend(_html);

			}else{}
			$(".save-pot").removeClass('disabled').text('Submit');
			}
		});
		console.log(_description,_description,_friends_choosen);
		});
	  });
    


</script>
	
{%endblock side%}